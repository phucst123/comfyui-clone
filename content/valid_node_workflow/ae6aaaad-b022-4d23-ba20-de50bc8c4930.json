{"description": "A usage method summerized from Github.\n1. The Promax model on huggingface is required to use the Inpaint function.\nhttps://huggingface.co/xinsir/controlnet-union-sdxl-1.0/blob/main/diffusion_pytorch_model_promax.safetensors\n2. The images generated by Inpaint preprocessing are RGBA and need to be converted to RGB through other nodes.\n3. If a broadcast error (output with shape [1, 1280] doesn't match the broadcast shape [2, 1280]) occurs, ComfyUI needs to be restarted.\n2 and 3 may be bugs, and they will be able to be used normally after being corrected in the future.", "name": "Controlnet++Inpainting", "stars": "5.0", "number_reviews": 0, "workflow_like": 33, "workflow_view": 12300, "workflow_download": 3400, "workflow_comment": 3, "author_workflow": 52, "author_download": 81200, "author_like": 1400, "author_view": 294400, "url": "https://openart.ai/workflows/fish_intent_33/controlnetinpainting/jD5NPxtk0r139jHzaw9c", "workflow_json": {"last_node_id": 57, "last_link_id": 129, "nodes": [{"id": 1, "type": "CheckpointLoaderSimple", "pos": [260, 180], "size": {"0": 315, "1": 98}, "flags": {}, "order": 0, "mode": 0, "outputs": [{"name": "MODEL", "type": "MODEL", "links": [12], "shape": 3, "slot_index": 0}, {"name": "CLIP", "type": "CLIP", "links": [2, 3], "shape": 3, "slot_index": 1}, {"name": "VAE", "type": "VAE", "links": [11], "shape": 3, "slot_index": 2}], "properties": {"Node name for S&R": "CheckpointLoaderSimple"}, "widgets_values": ["realvisxlV40_v40LightningBakedvae.safetensors"]}, {"id": 3, "type": "CLIPTextEncode", "pos": [510, 360], "size": {"0": 240, "1": 90}, "flags": {}, "order": 3, "mode": 0, "inputs": [{"name": "clip", "type": "CLIP", "link": 3}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [77], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "CLIPTextEncode"}, "widgets_values": ["(worst quality, low quality, illustration, 3d, 2d, painting, cartoons, sketch), open mouth"]}, {"id": 2, "type": "CLIPTextEncode", "pos": [600, 200], "size": {"0": 210, "1": 90}, "flags": {}, "order": 2, "mode": 0, "inputs": [{"name": "clip", "type": "CLIP", "link": 2}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [76], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "CLIPTextEncode"}, "widgets_values": ["magic mirror with rainbow colors,highly detailed,"]}, {"id": 5, "type": "ACN_AdvancedControlNetApply", "pos": [820, 190], "size": {"0": 285.6000061035156, "1": 286}, "flags": {}, "order": 14, "mode": 0, "inputs": [{"name": "positive", "type": "CONDITIONING", "link": 76}, {"name": "negative", "type": "CONDITIONING", "link": 77}, {"name": "control_net", "type": "CONTROL_NET", "link": 33, "slot_index": 2}, {"name": "image", "type": "IMAGE", "link": 34}, {"name": "mask_optional", "type": "MASK", "link": null}, {"name": "timestep_kf", "type": "TIMESTEP_KEYFRAME", "link": null}, {"name": "latent_kf_override", "type": "LATENT_KEYFRAME", "link": null}, {"name": "weights_override", "type": "CONTROL_NET_WEIGHTS", "link": null}, {"name": "model_optional", "type": "MODEL", "link": null}, {"name": "vae_optional", "type": "VAE", "link": null}], "outputs": [{"name": "positive", "type": "CONDITIONING", "links": [8], "shape": 3, "slot_index": 0}, {"name": "negative", "type": "CONDITIONING", "links": [9], "shape": 3, "slot_index": 1}, {"name": "model_opt", "type": "MODEL", "links": null, "shape": 3}], "properties": {"Node name for S&R": "ACN_AdvancedControlNetApply"}, "widgets_values": [1, 0, 1, ""]}, {"id": 6, "type": "KSampler //Inspire", "pos": [1140, 170], "size": {"0": 317.4000244140625, "1": 402}, "flags": {}, "order": 15, "mode": 0, "inputs": [{"name": "model", "type": "MODEL", "link": 12}, {"name": "positive", "type": "CONDITIONING", "link": 8}, {"name": "negative", "type": "CONDITIONING", "link": 9}, {"name": "latent_image", "type": "LATENT", "link": 72}, {"name": "scheduler_func_opt", "type": "SCHEDULER_FUNC", "link": null}], "outputs": [{"name": "LATENT", "type": "LATENT", "links": [10], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "KSampler //Inspire"}, "widgets_values": [116281385427471, "randomize", 6, 2, "dpmpp_2m", "AYS SDXL", 1, "GPU(=A1111)", "incremental", 0, 0, "linear"]}, {"id": 7, "type": "VAEDecode", "pos": [1180, 630], "size": {"0": 210, "1": 46}, "flags": {}, "order": 16, "mode": 0, "inputs": [{"name": "samples", "type": "LATENT", "link": 10}, {"name": "vae", "type": "VAE", "link": 11}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [22], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "VAEDecode"}}, {"id": 38, "type": "EmptyLatentImage", "pos": [520, 520], "size": {"0": 210, "1": 80}, "flags": {}, "order": 6, "mode": 0, "inputs": [{"name": "height", "type": "INT", "link": 74, "widget": {"name": "height"}}, {"name": "width", "type": "INT", "link": 73, "widget": {"name": "width"}}], "outputs": [{"name": "LATENT", "type": "LATENT", "links": [72], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "EmptyLatentImage"}, "widgets_values": [512, 512, 1]}, {"id": 20, "type": "ACN_ControlNet++LoaderAdvanced", "pos": [790, 540], "size": {"0": 340, "1": 80}, "flags": {}, "order": 13, "mode": 0, "inputs": [{"name": "plus_input", "type": "PLUS_INPUT", "link": 114, "slot_index": 0}], "outputs": [{"name": "CONTROL_NET", "type": "CONTROL_NET", "links": [33], "shape": 3, "slot_index": 0}, {"name": "IMAGE", "type": "IMAGE", "links": [34], "shape": 3, "slot_index": 1}], "properties": {"Node name for S&R": "ACN_ControlNet++LoaderAdvanced"}, "widgets_values": ["controlnet-union-sdxl-1.0\\diffusion_pytorch_model_promax.safetensors"]}, {"id": 19, "type": "ACN_ControlNet++InputNode", "pos": [560, 680], "size": {"0": 226.8000030517578, "1": 78}, "flags": {}, "order": 11, "mode": 0, "inputs": [{"name": "image", "type": "IMAGE", "link": 92}, {"name": "prev_plus_input", "type": "PLUS_INPUT", "link": null}], "outputs": [{"name": "PLUS_INPUT", "type": "PLUS_INPUT", "links": [114], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "ACN_ControlNet++InputNode"}, "widgets_values": ["inpaint/outpaint", ""]}, {"id": 46, "type": "PreviewImage", "pos": [830, 690], "size": {"0": 280, "1": 280}, "flags": {}, "order": 12, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 98}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 13, "type": "PreviewImage", "pos": [1500, 190], "size": {"0": 320, "1": 420}, "flags": {}, "order": 17, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 22}], "properties": {"Node name for S&R": "PreviewImage"}}, {"id": 17, "type": "LoadImage", "pos": [-420, 100], "size": {"0": 320, "1": 480}, "flags": {}, "order": 1, "mode": 0, "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [102], "shape": 3, "slot_index": 0}, {"name": "MASK", "type": "MASK", "links": [126], "shape": 3, "slot_index": 1}], "properties": {"Node name for S&R": "LoadImage"}, "widgets_values": ["clipspace/clipspace-mask-12873104.2.png [input]", "image"]}, {"id": 24, "type": "LayerUtility: ImageRemoveAlpha", "pos": [270, 660], "size": {"0": 252, "1": 102}, "flags": {}, "order": 10, "mode": 0, "inputs": [{"name": "RGBA_image", "type": "IMAGE", "link": 91}, {"name": "mask", "type": "MASK", "link": 129}], "outputs": [{"name": "RGB_image", "type": "IMAGE", "links": [92, 98], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "LayerUtility: ImageRemoveAlpha"}, "widgets_values": [false, "#000000"]}, {"id": 39, "type": "GetImageSizeAndCount", "pos": [300, 360], "size": {"0": 184.8000030517578, "1": 90}, "flags": {}, "order": 5, "mode": 0, "inputs": [{"name": "image", "type": "IMAGE", "link": 99}], "outputs": [{"name": "image", "type": "IMAGE", "links": null, "shape": 3}, {"name": "904 width", "type": "INT", "links": [73, 121], "shape": 3, "slot_index": 1}, {"name": "1100 height", "type": "INT", "links": [74, 122], "shape": 3, "slot_index": 2}, {"name": "1 count", "type": "INT", "links": null, "shape": 3}], "properties": {"Node name for S&R": "GetImageSizeAndCount"}}, {"id": 32, "type": "InpaintPreprocessor", "pos": [300, 520], "size": {"0": 210, "1": 46}, "flags": {}, "order": 9, "mode": 0, "inputs": [{"name": "image", "type": "IMAGE", "link": 100}, {"name": "mask", "type": "MASK", "link": 128}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [91], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "InpaintPreprocessor"}}, {"id": 57, "type": "ResizeMask", "pos": [10, 600], "size": {"0": 210, "1": 100}, "flags": {}, "order": 7, "mode": 4, "inputs": [{"name": "mask", "type": "MASK", "link": 126}, {"name": "width", "type": "INT", "link": 121, "widget": {"name": "width"}}, {"name": "height", "type": "INT", "link": 122, "widget": {"name": "height"}}], "outputs": [{"name": "mask", "type": "MASK", "links": [127], "shape": 3, "slot_index": 0}, {"name": "width", "type": "INT", "links": null, "shape": 3}, {"name": "height", "type": "INT", "links": null, "shape": 3}], "properties": {"Node name for S&R": "ResizeMask"}, "widgets_values": [512, 512, false]}, {"id": 47, "type": "JWImageResizeByLongerSide", "pos": [-10, 780], "size": {"0": 230, "1": 82}, "flags": {}, "order": 4, "mode": 4, "inputs": [{"name": "image", "type": "IMAGE", "link": 102}], "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [99, 100, 118], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "JWImageResizeByLongerSide"}, "widgets_values": [1024, "bicubic"]}, {"id": 56, "type": "LayerMask: MaskEdgeUltraDetail V2", "pos": [-40, 160], "size": [280, 300], "flags": {}, "order": 8, "mode": 0, "inputs": [{"name": "image", "type": "IMAGE", "link": 118}, {"name": "mask", "type": "MASK", "link": 127}], "outputs": [{"name": "image", "type": "IMAGE", "links": null, "shape": 3, "slot_index": 0}, {"name": "mask", "type": "MASK", "links": [128, 129], "shape": 3, "slot_index": 1}], "properties": {"Node name for S&R": "LayerMask: MaskEdgeUltraDetail V2"}, "widgets_values": ["PyMatting", 0, 0, 0.75, 6, 6, 0.01, 0.99, "cuda", 2]}], "links": [[2, 1, 1, 2, 0, "CLIP"], [3, 1, 1, 3, 0, "CLIP"], [8, 5, 0, 6, 1, "CONDITIONING"], [9, 5, 1, 6, 2, "CONDITIONING"], [10, 6, 0, 7, 0, "LATENT"], [11, 1, 2, 7, 1, "VAE"], [12, 1, 0, 6, 0, "MODEL"], [22, 7, 0, 13, 0, "IMAGE"], [33, 20, 0, 5, 2, "CONTROL_NET"], [34, 20, 1, 5, 3, "IMAGE"], [72, 38, 0, 6, 3, "LATENT"], [73, 39, 1, 38, 1, "INT"], [74, 39, 2, 38, 0, "INT"], [76, 2, 0, 5, 0, "CONDITIONING"], [77, 3, 0, 5, 1, "CONDITIONING"], [91, 32, 0, 24, 0, "IMAGE"], [92, 24, 0, 19, 0, "IMAGE"], [98, 24, 0, 46, 0, "IMAGE"], [99, 47, 0, 39, 0, "IMAGE"], [100, 47, 0, 32, 0, "IMAGE"], [102, 17, 0, 47, 0, "IMAGE"], [114, 19, 0, 20, 0, "PLUS_INPUT"], [118, 47, 0, 56, 0, "IMAGE"], [121, 39, 1, 57, 1, "INT"], [122, 39, 2, 57, 2, "INT"], [126, 17, 1, 57, 0, "MASK"], [127, 57, 0, 56, 1, "MASK"], [128, 56, 1, 32, 1, "MASK"], [129, 56, 1, 24, 1, "MASK"]], "groups": [{"title": "Resize", "bounding": [-30, 490, 290, 390], "color": "#3f789e", "font_size": 24, "locked": false}], "config": {}, "extra": {"ds": {"scale": 0.8769226950000005, "offset": [362.52472766960676, -96.15338199718002]}}, "version": 0.4}}