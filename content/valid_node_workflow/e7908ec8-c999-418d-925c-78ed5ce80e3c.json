{"description": "I tried to make the character's expression change, but failed. If you succeed, please leave a comment and tell me how, thank you.", "name": "InstantID + AnimateDiff", "stars": "1.0", "number_reviews": 1, "workflow_like": 26, "workflow_view": 6100, "workflow_download": 1600, "workflow_comment": 1, "author_workflow": 208, "author_download": 488000, "author_like": 8800, "author_view": 1700000, "url": "https://openart.ai/workflows/datou/instantid-animatediff/6pUr8zAS2VLVgS0eUtFH", "workflow_json": {"last_node_id": 36, "last_link_id": 55, "nodes": [{"id": 13, "type": "ApplyInstantIDAdvanced", "pos": [1980, 370], "size": {"0": 315, "1": 314}, "flags": {}, "order": 12, "mode": 0, "inputs": [{"name": "instantid", "type": "INSTANTID", "link": 10, "label": "instantid"}, {"name": "insightface", "type": "FACEANALYSIS", "link": 11, "label": "insightface"}, {"name": "control_net", "type": "CONTROL_NET", "link": 41, "label": "control_net"}, {"name": "image", "type": "IMAGE", "link": 13, "label": "image"}, {"name": "model", "type": "MODEL", "link": 43, "label": "model"}, {"name": "positive", "type": "CONDITIONING", "link": 15, "label": "positive"}, {"name": "negative", "type": "CONDITIONING", "link": 16, "label": "negative"}, {"name": "image_kps", "type": "IMAGE", "link": null, "label": "image_kps"}, {"name": "mask", "type": "MASK", "link": null, "label": "mask"}], "outputs": [{"name": "MODEL", "type": "MODEL", "links": [44], "shape": 3, "label": "MODEL", "slot_index": 0}, {"name": "positive", "type": "CONDITIONING", "links": [18], "shape": 3, "label": "positive", "slot_index": 1}, {"name": "negative", "type": "CONDITIONING", "links": [19], "shape": 3, "label": "negative", "slot_index": 2}], "properties": {"Node name for S&R": "ApplyInstantIDAdvanced"}, "widgets_values": [0.8, 0.8, 0, 1]}, {"id": 14, "type": "InstantIDModelLoader", "pos": [1560, 100], "size": {"0": 315, "1": 58}, "flags": {}, "order": 0, "mode": 0, "outputs": [{"name": "INSTANTID", "type": "INSTANTID", "links": [10], "shape": 3, "label": "INSTANTID", "slot_index": 0}], "properties": {"Node name for S&R": "InstantIDModelLoader"}, "widgets_values": ["ip-adapter.bin"]}, {"id": 12, "type": "InstantIDFaceAnalysis", "pos": [1560, 210], "size": {"0": 315, "1": 58}, "flags": {}, "order": 1, "mode": 0, "outputs": [{"name": "FACEANALYSIS", "type": "FACEANALYSIS", "links": [11], "shape": 3, "label": "FACEANALYSIS", "slot_index": 0}], "properties": {"Node name for S&R": "InstantIDFaceAnalysis"}, "widgets_values": ["CUDA"]}, {"id": 33, "type": "ControlNetLoaderAdvanced", "pos": [1550, 320], "size": [327.6000061035156, 58], "flags": {}, "order": 2, "mode": 0, "inputs": [{"name": "timestep_keyframe", "type": "TIMESTEP_KEYFRAME", "link": null}], "outputs": [{"name": "CONTROL_NET", "type": "CONTROL_NET", "links": [41], "shape": 3, "slot_index": 0}], "properties": {"Node name for S&R": "ControlNetLoaderAdvanced"}, "widgets_values": ["diffusion_pytorch_model.safetensors"]}, {"id": 23, "type": "ADE_AnimateDiffLoaderWithContext", "pos": [1080, 670], "size": {"0": 342.5999755859375, "1": 230}, "flags": {}, "order": 11, "mode": 0, "inputs": [{"name": "model", "type": "MODEL", "link": 45, "label": "\u6a21\u578b"}, {"name": "context_options", "type": "CONTEXT_OPTIONS", "link": 26, "slot_index": 1, "label": "\u4e0a\u4e0b\u6587\u8bbe\u7f6e"}, {"name": "motion_lora", "type": "MOTION_LORA", "link": null, "label": "\u52a8\u6001LoRA"}, {"name": "motion_model_settings", "type": "MOTION_MODEL_SETTINGS", "link": null, "label": "\u52a8\u6001\u6a21\u578b\u8bbe\u7f6e"}, {"name": "sample_settings", "type": "sample_settings", "link": null, "label": "\u91c7\u6837\u8bbe\u7f6e"}, {"name": "ad_keyframes", "type": "AD_KEYFRAMES", "link": null, "label": "AD\u5173\u952e\u5e27"}], "outputs": [{"name": "MODEL", "type": "MODEL", "links": [43], "shape": 3, "slot_index": 0, "label": "\u6a21\u578b"}], "properties": {"Node name for S&R": "ADE_AnimateDiffLoaderWithContext"}, "widgets_values": ["mm_sdxl_v10_beta.ckpt", "sqrt_linear (AnimateDiff)", 1, true], "color": "#2a363b", "bgcolor": "#3f5159"}, {"id": 22, "type": "CheckpointLoaderSimple", "pos": [80, 1050], "size": {"0": 395.52691650390625, "1": 106.62748718261719}, "flags": {"collapsed": false}, "order": 3, "mode": 0, "outputs": [{"name": "MODEL", "type": "MODEL", "links": [45], "shape": 3, "slot_index": 0, "label": "\u6a21\u578b"}, {"name": "CLIP", "type": "CLIP", "links": [46, 47], "shape": 3, "slot_index": 1, "label": "CLIP"}, {"name": "VAE", "type": "VAE", "links": [48], "shape": 3, "label": "VAE", "slot_index": 2}], "properties": {"Node name for S&R": "CheckpointLoaderSimple"}, "widgets_values": ["dreamshaperXL_lightningDPMSDE.safetensors"], "color": "#233", "bgcolor": "#355"}, {"id": 21, "type": "PrimitiveNode", "pos": [250, 1230], "size": {"0": 210, "1": 82}, "flags": {"collapsed": false}, "order": 4, "mode": 0, "outputs": [{"name": "INT", "type": "INT", "links": [24, 27], "slot_index": 0, "widget": {"name": "batch_size"}, "label": "INT"}], "properties": {"Run widget replace on values": false}, "widgets_values": [32, "fixed"], "color": "#322", "bgcolor": "#533"}, {"id": 26, "type": "CLIPTextEncode", "pos": [690, 1960], "size": [726.2701113085877, 148.8324406932113], "flags": {}, "order": 8, "mode": 0, "inputs": [{"name": "clip", "type": "CLIP", "link": 47, "slot_index": 0, "label": "CLIP"}], "outputs": [{"name": "CONDITIONING", "type": "CONDITIONING", "links": [16], "shape": 3, "slot_index": 0, "label": "\u6761\u4ef6"}], "properties": {"Node name for S&R": "CLIPTextEncode"}, "widgets_values": ["worstquality, low quality, normal quality,jpegartifacts,signature, watermark, username,blurry,bad feet,cropped,poorly drawn hands,poorly drawn face,mutation,deformed,worst quality,low quality,normal quality,jpeg artifacts,signature,watermark,extra fingers,fewer digits,extra limbs,extra arms,extra legs,malformed limbs,fused fingers,too many fingers,long neck,cross-eyed,mutated hands,polar lowres,bad body,bad proportions,gross proportions,text,error,missing fingers,missing arms,missing legs,extra digit,\n"], "color": "#322", "bgcolor": "#533"}, {"id": 15, "type": "KSampler (Efficient)", "pos": [2540, 610], "size": {"0": 325, "1": 562}, "flags": {}, "order": 13, "mode": 0, "inputs": [{"name": "model", "type": "MODEL", "link": 44, "label": "\u6a21\u578b"}, {"name": "positive", "type": "CONDITIONING", "link": 18, "label": "\u6b63\u9762\u6761\u4ef6"}, {"name": "negative", "type": "CONDITIONING", "link": 19, "label": "\u8d1f\u9762\u6761\u4ef6"}, {"name": "latent_image", "type": "LATENT", "link": 36, "label": "Latent"}, {"name": "optional_vae", "type": "VAE", "link": 48, "label": "VAE"}, {"name": "script", "type": "SCRIPT", "link": 20, "slot_index": 5, "label": "\u811a\u672c"}], "outputs": [{"name": "MODEL", "type": "MODEL", "links": null, "shape": 3, "label": "\u6a21\u578b"}, {"name": "CONDITIONING+", "type": "CONDITIONING", "links": null, "shape": 3, "label": "\u6b63\u9762\u6761\u4ef6"}, {"name": "CONDITIONING-", "type": "CONDITIONING", "links": null, "shape": 3, "label": "\u8d1f\u9762\u6761\u4ef6"}, {"name": "LATENT", "type": "LATENT", "links": null, "shape": 3, "label": "Latent"}, {"name": "VAE", "type": "VAE", "links": null, "shape": 3, "label": "VAE"}, {"name": "IMAGE", "type": "IMAGE", "links": [21], "shape": 3, "slot_index": 5, "label": "\u56fe\u50cf"}], "properties": {"Node name for S&R": "KSampler (Efficient)"}, "widgets_values": [596360948816289, null, 4, 2, "dpmpp_sde", "karras", 1, "auto", "true"], "color": "#223322", "bgcolor": "#335533", "shape": 1}, {"id": 18, "type": "EmptyLatentImage", "pos": [1980, 740], "size": [315, 106], "flags": {}, "order": 9, "mode": 0, "inputs": [{"name": "batch_size", "type": "INT", "link": 24, "widget": {"name": "batch_size"}, "label": "\u6279\u6b21\u5927\u5c0f"}], "outputs": [{"name": "LATENT", "type": "LATENT", "links": [36], "shape": 3, "slot_index": 0, "label": "Latent"}], "properties": {"Node name for S&R": "EmptyLatentImage"}, "widgets_values": [1016, 1016, 32], "color": "#223", "bgcolor": "#335"}, {"id": 16, "type": "HighRes-Fix Script", "pos": [1990, 900], "size": [313.520751953125, 250], "flags": {"collapsed": false}, "order": 5, "mode": 0, "inputs": [{"name": "script", "type": "SCRIPT", "link": null, "label": "\u811a\u672c"}], "outputs": [{"name": "SCRIPT", "type": "SCRIPT", "links": [20], "shape": 3, "label": "\u811a\u672c"}], "properties": {"Node name for S&R": "HighRes-Fix Script"}, "widgets_values": ["latent", "(use same)", "ttl_nn.SDXL", "4x_NMKD-Siax_200k.pth", 1.5, true, -1, null, 2, 0.6, 1, false, "depth-zoe-xl-v1.0-controlnet.safetensors", 0.8, "DepthAnythingPreprocessor", true], "color": "#443322", "bgcolor": "#665533", "shape": 1}, {"id": 11, "type": "LoadImage", "pos": [1550, 430], "size": {"0": 315, "1": 314}, "flags": {}, "order": 6, "mode": 0, "outputs": [{"name": "IMAGE", "type": "IMAGE", "links": [13], "shape": 3, "slot_index": 0, "label": "\u56fe\u50cf"}, {"name": "MASK", "type": "MASK", "links": null, "shape": 3, "label": "\u906e\u7f69"}], "title": "face", "properties": {"Node name for S&R": "LoadImage"}, "widgets_values": ["img__00366_ (2).png", "image"]}, {"id": 24, "type": "ADE_AnimateDiffUniformContextOptions", "pos": [710, 770], "size": {"0": 315, "1": 270}, "flags": {"collapsed": false}, "order": 7, "mode": 0, "inputs": [{"name": "prev_context", "type": "CONTEXT_OPTIONS", "link": null, "label": "prev_context"}, {"name": "view_opts", "type": "VIEW_OPTS", "link": null, "label": "view_opts"}], "outputs": [{"name": "CONTEXT_OPTIONS", "type": "CONTEXT_OPTIONS", "links": [26], "shape": 3, "label": "\u4e0a\u4e0b\u6587\u8bbe\u7f6e"}], "properties": {"Node name for S&R": "ADE_AnimateDiffUniformContextOptions"}, "widgets_values": [16, 1, 4, "uniform", true, "flat", false, 0, 1], "color": "#223", "bgcolor": "#335"}, {"id": 17, "type": "VHS_VideoCombine", "pos": [2971, 487], "size": [700, 912], "flags": {"collapsed": false}, "order": 14, "mode": 0, "inputs": [{"name": "images", "type": "IMAGE", "link": 21, "label": "\u56fe\u50cf"}, {"name": "audio", "type": "VHS_AUDIO", "link": null, "label": "\u97f3\u9891"}, {"name": "batch_manager", "type": "VHS_BatchManager", "link": null, "label": "\u6279\u6b21\u7ba1\u7406"}], "outputs": [{"name": "GIF", "type": "GIF", "links": null, "shape": 3, "label": "GIF"}], "properties": {"Node name for S&R": "VHS_VideoCombine"}, "widgets_values": {"frame_rate": 16, "loop_count": 0, "filename_prefix": "AnimateDiff", "format": "image/gif", "pingpong": false, "save_output": true, "videopreview": {"hidden": false, "paused": false, "params": {"filename": "AnimateDiff_00019.gif", "subfolder": "", "type": "output", "format": "image/gif"}}}, "color": "#233", "bgcolor": "#355"}, {"id": 25, "type": "BatchPromptSchedule", "pos": [690, 1140], "size": {"0": 725.3942260742188, "1": 764.6110229492188}, "flags": {"collapsed": false}, "order": 10, "mode": 0, "inputs": [{"name": "clip", "type": "CLIP", "link": 46, "label": "CLIP"}, {"name": "max_frames", "type": "INT", "link": 27, "widget": {"name": "max_frames"}, "label": "\u6700\u5927\u5e27\u6570"}], "outputs": [{"name": "POS", "type": "CONDITIONING", "links": [15], "shape": 3, "slot_index": 0, "label": "POS"}, {"name": "NEG", "type": "CONDITIONING", "links": null, "shape": 3, "label": "NEG"}], "properties": {"Node name for S&R": "BatchPromptSchedule"}, "widgets_values": ["\"7\" :\"walking on Streets of a modernized city, smile, night\",\n\"30\" :\"walking in the forest, smile\",\n", 32, false, "[1boy] ", "track left,eye level, (solo:1.5)", 0, 0, 0, 0, 0], "color": "#232", "bgcolor": "#353"}], "links": [[10, 14, 0, 13, 0, "INSTANTID"], [11, 12, 0, 13, 1, "FACEANALYSIS"], [13, 11, 0, 13, 3, "IMAGE"], [15, 25, 0, 13, 5, "CONDITIONING"], [16, 26, 0, 13, 6, "CONDITIONING"], [18, 13, 1, 15, 1, "CONDITIONING"], [19, 13, 2, 15, 2, "CONDITIONING"], [20, 16, 0, 15, 5, "SCRIPT"], [21, 15, 5, 17, 0, "IMAGE"], [24, 21, 0, 18, 0, "INT"], [26, 24, 0, 23, 1, "CONTEXT_OPTIONS"], [27, 21, 0, 25, 1, "INT"], [36, 18, 0, 15, 3, "LATENT"], [41, 33, 0, 13, 2, "CONTROL_NET"], [43, 23, 0, 13, 4, "MODEL"], [44, 13, 0, 15, 0, "MODEL"], [45, 22, 0, 23, 0, "MODEL"], [46, 22, 1, 25, 0, "CLIP"], [47, 22, 1, 26, 0, "CLIP"], [48, 22, 2, 15, 4, "VAE"]], "groups": [], "config": {}, "extra": {}, "version": 0.4, "widget_idx_map": {"15": {"seed": 0, "sampler_name": 4, "scheduler": 5}, "16": {"seed": 6}}}}